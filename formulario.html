<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Perris</title>
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="stylesheet" href="css/fontello.css">
    <link rel="stylesheet" href="css/formulario.css">
</head>

<body>
    <!-- cabecera del sitio web-->
    <header>
        <div class="contenedor">
            <h1 class="icon-credit-card">Mis Perris</h1>
            <!-- permite activar y desactivar el menu desplegable-->
            <input type="checkbox" name="" id="menu-bar">
            <label class="icon-cc-visa" for="menu-bar"></label>
            <!-- menu-->
            <nav class="menu">
                <a href="index.html">Inicio</a>
                <a href="galeria.html">Galeria</a>
                <a href="formulario.html">Formulario</a>
                <a href="">Quienes Somos</a>
            </nav>
        </div>
    </header>
    <!-- pagina principal -->
    <main>
        <section id="banner">
            <img src="img/perro2.jpg" alt="">
            <div class="contenedor">
                <h2>Mascotas contentas en mis perris</h2>
                <p>Cual es la mejor mascota para usted</p>
                <a href="">Leer Mas</a>
            </div>
        </section>

        <section id="bienvenido">
            <h2>Formulario de Inscripcion para Adoptar</h2>
            <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aut voluptatum dignissimos corrupti ut quia,
                cupiditate, nostrum sed ex harum impedit alias et accusamus facere, id nisi! Quibusdam eligendi iusto
                nobis.</p>
        </section>

        <section id="formulario">

            <form class="form-registro" action="" method="POST">

                <h2 class="form-titulo">Crear una Cuenta</h2>

                <div class="contenedor-input">
                    <input class="col-sm" type="text" name="txtNombre" id="txtNombre" placeholder="ingrese nombre" required minlength="2" maxlength="10">
                    <input class="col-sm" type="text" name="txtApellidos" id="txtApellidos" placeholder="ingrese apellidos" required>
                    <input class="col-xl" type="email" name="txtEmail" id="txtEmail" placeholder="ingrese correo" required>
                    <input class="col-sm" type="text" name="txtUsuario" id="txtUsuario" placeholder="ingrese usuario" required>
                    <input class="col-sm" type="password" name="txtPass" id="txtPass" placeholder="ingrese password" required>
                    <input class="col-xl" type="text" name="txtTelefono" id="txtTelefono" placeholder="ingrese telefono" required>
                    <input class="col-sm" type="text" name="txtRut" id="txtRut" placeholder="ingrese rut Ej. 12345678-9" required >
                    <input class="col-sm" type="date" name="txtFechaNaci" id="txtFechaNaci">

                    <input class="btn-registrar" type="submit" value="Registrar">
                    <input class="btn-registrar" type="button" value="Grabar"
                    onclick="grabar()">
                    <input class="btn-registrar" type="button" value="Listar"
                    onclick="listar()">
                    <input class="btn-registrar" type="button" value="Validar Formulario" 
                     onclick="validarForm()">
                </div>
            </form>

        </section>
        <script src="js/usuario.js"></script>
        <script>
            var arreglo = new Array();
            var ind=0;

            function grabar() {
                var rut= document.getElementById('txtRut').value;
                var nombre = document.getElementById('txtNombre').value;
                var apellidos = document.getElementById('txtApellidos').value;
                var fecha = document.getElementById('txtFechaNaci').value;
                usu = new usuario();
                usu.setRut(rut);
                usu.setNombre(nombre);
                usu.setApellido(apellidos);
                usu.setFecha(fecha);
                console.log(usu.imprimir());
                arreglo[ind] = JSON.stringify(usu);
                localStorage.setItem('registros',arreglo);
                alert('Grabo Usuario');
                ind++;
            }
            function listar() {
                var tabla = "<table border=1>";
                tabla = tabla + "<tr> <td>Rut</td> <td>Nombre</td> <td>Apellido</td> <td>Fecha</td> </tr>";    
                var datos = localStorage.getItem('registros');
                var arreglo = new Array();
                console.log(datos);
                datos = datos.split('},{').join('};{');// reemplazar caracteres
                console.log(datos);
                arreglo = datos.split(';');
                for (let index = 0; index < arreglo.length; index++) {
                    var elemento = arreglo[index];
                    var usuario = JSON.parse(elemento);
                    tabla=tabla+"<tr> <td>"+usuario.rut+"</td> <td>"+usuario.nombre+"</td> <td>"+usuario.apellido+"</td> <td>"+usuario.fecha+"</td> </tr>";
                    
                }
                tabla=tabla+"</table>";
                document.getElementById('listados').innerHTML=tabla;
            }
        </script>
    </main>
    <div id="listados">

    </div>
    <footer>
        <div class="contenedor">
            <p>Mis Perris - Desarrollo Web</p>
        </div>
    </footer>

    <script src="js/scripts.js"></script>
</body>

</html>